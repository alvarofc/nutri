---
import { getLangFromUrl, useTranslations, getLocalizedPath } from '../../i18n/ui';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const bottomLinks = [
  {
    header: t('footer.social'),
    links: [
      {
        name: t('social.twitter'),
        href: 'https://twitter.com/',
        isExternal: true,
      },
      {
        name: t('social.instagram'),
        href: 'https://instagram.com/tu.nutri.alexandra',
        isExternal: true,
      },
      {
        name: t('social.facebook'),
        href: 'https://facebook.com/',
        isExternal: true,
      },
    ],
  },
  {
    header: t('footer.company'),
    links: [
      {
        name: t('nav.home'),
        href: getLocalizedPath('/', lang),
        isExternal: false,
      },
      {
        name: t('nav.about'),
        href: getLocalizedPath('/about', lang),
        isExternal: false,
      },
      {
        name: t('nav.pricing'),
        href: getLocalizedPath('/pricing', lang),
        isExternal: false,
      },
      {
        name: t('nav.contact'),
        href: getLocalizedPath('/contact', lang),
        isExternal: false,
      },
    ],
  },
  {
    header: t('footer.legal'),
    links: [
      {
        name: t('footer.privacy'),
        href: getLocalizedPath('/privacy', lang),
        isExternal: false,
      },
    ],
  },
];
---

<footer
  class="bg-blue-900 mt-16 py-16 lg:mt-20 lg:py-20 text-white"
  aria-labelledby="footer-heading"
>
  <h2 id="footer-heading" class="sr-only">{t('footer.heading')}</h2>
  <div class="mx-auto max-w-2xl px-4 sm:px-6 lg:max-w-7xl lg:px-8">
    <div class="flex flex-col justify-between gap-12 sm:gap-16 lg:flex-row">
      <div class="flex max-w-sm flex-col items-start gap-6 sm:gap-8">
        <a href={getLocalizedPath('/', lang)} class="flex flex-col items-start">
          <span
            class="whitespace-nowrap text-left font-serif text-xl uppercase leading-none tracking-ultra-tight text-white md:text-2xl"
          >
            TU NUTRI ALEXANDRA
          </span>
          <span
            class="mt-1 whitespace-nowrap border-t border-blue-200/30 pt-1 text-left font-sans text-[0.65rem] uppercase tracking-widest text-blue-100 md:text-xs"
          >
            Smart Anti-inflammatory Nutrition
          </span>
        </a>
        <!-- <p class="text-blue-200 text-base">
         Alexandra es una profesional con formación oficial e inscrita en el Colegio de Dietistas Nutricionistas de Madrid.
        </p> -->
        <p class="text-blue-200 text-sm">© {new Date().getFullYear()} Alexandra Ivanova. {t('footer.rights')}</p>
      </div>

      <!-- Bottom links -->
      <div class="grid max-w-xl flex-1 grid-cols-1 gap-8 sm:grid-cols-3">
        {
          bottomLinks.map((group) => (
            <div class="flex flex-col gap-4">
              <p class="text-base font-medium text-white">{group.header}</p>
              <ul role="list" class="flex flex-col gap-3">
                {group.links.map((link) => (
                  <li>
                    <a
                      href={link.href}
                      class="focus-visible:outline-white inline-flex items-center gap-1 rounded-md text-base text-blue-200 hover:text-white hover:underline focus-visible:outline focus-visible:outline-2"
                      target={link.isExternal ? '_blank' : undefined}
                      rel={link.isExternal ? 'noopener' : undefined}
                    >
                      {link.name}
                      {link.isExternal && (
                        <svg
                          class="h-4 w-4"
                          xmlns="http://www.w3.org/2000/svg"
                          viewBox="0 0 24 24"
                          fill="currentColor"
                          aria-hidden="true"
                        >
                          <path d="M10 6V8H5V19H16V14H18V20C18 20.5523 17.5523 21 17 21H4C3.44772 21 3 20.5523 3 20V7C3 6.44772 3.44772 6 4 6H10ZM21 3V11H19L18.9999 6.413L11.2071 14.2071L9.79289 12.7929L17.5849 5H13V3H21Z" />
                        </svg>
                      )}
                    </a>
                  </li>
                ))}
              </ul>
            </div>
          ))
        }
      </div>
    </div>
  </div>
</footer>
